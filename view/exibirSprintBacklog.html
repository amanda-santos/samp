{include file="../view/header.html" title=foo}

<!--<div>
	<a href="../controller/exibirProductBacklog.php" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"></i> Product Backlog </a>
	<a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"></i> Sprint Backlog</a>
</div>-->

<!-- Page Heading -->
<div class="d-sm-flex align-items-center justify-content-between mb-4">
  <h1 class="h3 mb-0 text-gray-800">Sprint Backlog</h1>
</div>

<!-- Content Row -->
<div class="col-md-8"> 
<div class="row">

    <div class="col-md-12">
		  <table class="table col-md-15">
			  <thead>
				  <tr>
					<th>Nome da Estória</th>
					<th>Situação</th>
					<th>Nível de dificuldade</th>
					<th>Duração (Em horas)</th>
					<th>Ações</th>
				</tr>
			</thead>
			<tbody>
				{if $sprintBacklog->getEstorias() != null}
					{foreach item=estoria from=$sprintBacklog->getEstorias()}
							<tr>
								<td>{$estoria->getNome()}</td>
								<td>{$estoria->getSituacao()}</td>
								<td>{$estoria->getNivelDificuldade()}</td>
								<td>{$estoria->getDuracao()}</td>
								<td>
									<button type="button" class="btn btn-xs btn-primary" data-toggle="modal" data-target="#myModal{$estoria->getId()}"><i class="fas fa-eye"></i></button>
									{if $projeto->getScrumMaster() == 1}
										<a href="editarEstoria.php?id={$estoria->getId()}"><button onclick="editar" type="button" class="btn btn-warning"><i class="fas fa-pencil-alt"></i></button></a>
										<button onclick="apagar('{$estoria->getId()}','{$projeto->getId()}');" type="button" class="btn btn-danger"><i class="fas fa-trash-alt"></i></button>
										<script type="text/javascript">
													function apagar(estoria, idProjeto) {
														if (window.confirm('Deseja realmente excluir esta estória do Sprint Backlog?')) {
															window.location = '../controller/excluirEstoriaSprintBacklog.php?idEstoria=' + estoria + '&idProjeto=' + idProjeto;
														}
													}
										</script>
										<a href="exibirSprintBacklog.php?idEstoria={$estoria->getId()}&id={projeto->getId}" title="Visualizar Responsáveis" data-toggle="modal" data-target="#visualizarResponsaveis{$responsaveis}"class="d-none d-sm-inline-block btn btn-primary shadow-sm"><i class="fas fa-user-friends"></i></i></a>
									{/if}
									<!--{if $responsaveis}
									<button type="button" class="btn btn-xs btn-primary" data-toggle="modal" data-target="#ModalCadastrarSubtarefa"><i class="fas fa-tasks"></i></button>
									{/if}-->
								</td>
							</tr>
							<!-- Inicio Modal -->
							<div class="modal fade" id="myModal{$estoria->getId()}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
								<div class="modal-dialog" role="document">
									<div class="modal-content">
										<div class= "modal-header">
										<h4 class="modal-title text-center" id="myModalLabel">{$estoria->getNome()}</h4>
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
										<span aria-hidden="true">&times;</span></button>
										</div>
										<div class="modal-body">
											<p>{$estoria->getDesc()}</p>
										</div>
										<div class="modal-footer">
											<button class="btn btn-secondary" type="button" data-dismiss="modal">Fechar</button>
										</div>
									</div>
								</div>
							</div>

							<div class="modal fade" id="ModalCadastrarSubtarefa" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
								<div class="modal-dialog modal-dialog-centered" role="document">
									<div class="modal-content">
										<div class= "modal-header">
										<h4 class="modal-title text-center" id="myModalLabel">Informe o nome da subtarefa</h4>
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
										<span aria-hidden="true">&times;</span></button>
										</div>
										<div class="modal-body">
											<form>
									          <div class="form-group">
									            <input type="text" class="form-control" id="recipient-name">
									          </div>
									        </form>
										</div>
										<div class="modal-footer">
											<button class="btn btn-secondary" type="button" data-dismiss="modal">
											Fechar</button>
											<button type="button" class="btn btn-primary">Cadastrar Subtarefa</button>
										</div>
									</div>
								</div>
							</div>
							<!-- Fim Modal -->

							<div class="modal fade" id="visualizarResponsaveis{$responsaveis}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
								<div class="modal-dialog" role="document">
									<div class="modal-content">
										<div class= "modal-header">
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
										<span aria-hidden="true">&times;</span></button>
										</div>
										<div class="modal-body">
											{foreach item=responsavel from=$responsaveis->getNome()}
											<p>{$responsavel}</p>
										</div>
										<div class="modal-footer">
											<button class="btn btn-secondary" type="button" data-dismiss="modal">Fechar</button>
										</div>
									</div>
								</div>
							</div>
					{/foreach}
				{/if}
			</tbody>
		 	</table>
		</div>
	</div>
</div>
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
</div>
</div>


{include file="../view/footer.html" title=foo}
