{include file="../view/header.html" title=foo}

<!--<div>
	<a href="../controller/exibirProductBacklog.php" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"></i> Product Backlog </a>
	<a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"></i> Sprint Backlog</a>
</div>-->

<!-- Page Heading -->
<div class="d-sm-flex align-items-center justify-content-between mb-4">
  <h1 class="h3 mb-0 text-gray-800">Sprint Backlog</h1>
</div>

<!-- Content Row -->
<div class="col-md-8"> 
<div class="row">

    <div class="col-md-12">
		  <table class="table">
			  <thead>
				  <tr>
					<th>Nome da Estória</th>
					<th>Situação</th>
					<th>Níveis de dificuldade</th>
					<th>Ações</th>
				</tr>
			</thead>
			<tbody>
				{if $sprintBacklog->getEstorias() != null}
					{foreach item=estoria from=$sprintBacklog->getEstorias()}
							<tr>

								<td>{$estoria->getNome()}</td>
								<td>{$estoria->getSituacao()}</td>
								<td>{$estoria->getNivelDificuldade()}</td>
								<td>
									<button type="button" class="btn btn-xs btn-primary" data-toggle="modal" data-target="#myModal{$estoria->getId()}"><i class="fas fa-eye"></i></button>
									<a href="editarEstoria.php?id={$estoria->getId()}"><button onclick="editar" type="button" class="btn btn-warning"><i class="fas fa-pencil-alt"></i></button></a>

								{if $projeto->getScrumMaster() == 1}

								<button onclick="apagar('{$estoria->getId()}','{$projeto->getId()}');" type="button" class="btn btn-danger"><i class="fas fa-trash-alt"></i></button>
								<script type="text/javascript">
											function apagar(estoria, idProjeto) {
												if (window.confirm('Deseja realmente excluir esta estória do Sprint Backlog?')) {
													window.location = '../controller/excluirEstoriaSprintBacklog.php?idEstoria=' + estoria + '&idProjeto=' + idProjeto;
												}
											}

								</script>
								</td>
								{/if}
							</tr>
							<!-- Inicio Modal -->
							<div class="modal fade" id="myModal{$estoria->getId()}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
								<div class="modal-dialog" role="document">
									<div class="modal-content">
										<div class= "modal-header">
										<h4 class="modal-title text-center" id="myModalLabel">{$estoria->getNome()}</h4>
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
										<span aria-hidden="true">&times;</span></button>
										</div>
										<div class="modal-body">
											<p>{$estoria->getDesc()}</p>
										</div>
										<div class="modal-footer">
											<button class="btn btn-secondary" type="button" data-dismiss="modal">Fechar</button>
										</div>
									</div>
								</div>
							</div>
							<!-- Fim Modal -->
					{/foreach}
				{/if}
			</tbody>
		 </table>

		{if ($projeto->getScrumMaster() == 1)}
		  	<div>
		    	<a href="../controller/criarEstoriaSprintBacklog.php?id={$projeto->getId()}" class="d-none d-sm-inline-block btn btn-primary shadow-sm"><i class="fas fa-plus"></i> Cadastrar nova estória no <i>Sprint Backlog</i></a>
			</div>
	    {/if}

		</div>
</div>
</div>
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
</div>
</div>

{include file="../view/footer.html" title=foo}
